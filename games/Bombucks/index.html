<!DOCTYPE html>
<html lang="ru">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
  <title>Pathfinder Game</title>
  <style>
    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
      font-family: Arial, sans-serif;
      -webkit-tap-highlight-color: transparent;
    }
    body {
      background-color: #0D1117;
      min-height: 100vh;
      display: flex;
      flex-direction: column;
      align-items: center;
      padding-top: 2rem;
      touch-action: manipulation;
      opacity: 0;
      animation: fadeIn 1s forwards;
      overflow: auto;
      position: relative;
    }
    /* Canvas –¥–ª—è —Ñ–æ–Ω–∞ —Å–æ –∑–≤–µ–∑–¥–∞–º–∏ */
    #stars-canvas {
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      z-index: -1;
    }
    @keyframes fadeIn {
      0% { opacity: 0; }
      100% { opacity: 1; }
    }
    .header {
      width: 100%;
      max-width: 400px;
      display: flex;
      justify-content: space-between;
      align-items: center;
      padding: 1rem;
      opacity: 0;
      animation: fadeInUp 1s 0.3s forwards;
      z-index: 1;
    }
    @keyframes fadeInUp {
      0% { opacity: 0; transform: translateY(20px); }
      100% { opacity: 1; transform: translateY(0); }
    }
    .logo-img {
      height: 2rem;
      width: auto;
      object-fit: contain;
    }
    .switch-button {
      background-color: #1D90F5;
      color: white;
      border: none;
      padding: 0.5rem 1rem;
      border-radius: 0.5rem;
      cursor: pointer;
      font-size: 0.875rem;
      transition: background-color 0.3s;
      margin-left: 5px;
      position: relative;
      overflow: hidden;
    }
    .switch-button:after {
      content: '';
      position: absolute;
      top: 0;
      left: -100%;
      width: 100%;
      height: 100%;
      background: linear-gradient(90deg, transparent 0%, rgba(255, 255, 255, 0.2) 50%, transparent 100%);
      transition: all 0.3s;
    }
    .switch-button:hover:after {
      left: 100%;
    }
    .game-container {
      width: 100%;
      max-width: 400px;
      display: flex;
      flex-direction: column;
      align-items: center;
      padding: 1rem;
      opacity: 0;
      animation: fadeInUp 1s 0.6s forwards;
      z-index: 1;
      position: relative;
    }
    .size-selector {
      display: flex;
      gap: 10px;
      margin-bottom: 20px;
      animation: fadeInUp 1s 0.6s forwards;
    }
    .size-button {
      background-color: #1A1F25;
      color: white;
      border: none;
      padding: 10px 20px;
      border-radius: 0.5rem;
      cursor: pointer;
      font-size: 14px;
      transition: all 0.3s;
      position: relative;
      overflow: hidden;
    }
    .size-button:after {
      content: '';
      position: absolute;
      top: 0;
      left: -100%;
      width: 100%;
      height: 100%;
      background: linear-gradient(90deg, transparent 0%, rgba(255, 255, 255, 0.2) 50%, transparent 100%);
      transition: all 0.3s;
    }
    .size-button:hover:after {
      left: 100%;
    }
    .size-button.active {
      background-color: #1D90F5;
      animation: pulse 2s infinite;
    }
    .game-grid {
      display: grid;
      gap: 8px;
      background-color: rgba(26, 31, 37, 0.8);
      padding: 16px;
      border-radius: 16px;
      width: fit-content;
      margin: 0 auto;
      overflow: hidden;
      position: relative;
      opacity: 0;
      animation: fadeInUp 1s 0.9s forwards;
      backdrop-filter: blur(10px);
      box-shadow: 0 4px 30px rgba(0, 0, 0, 0.3);
    }
    .cell {
      width: 40px;
      height: 40px;
      border: none;
      border-radius: 50%;
      cursor: default;
      transition: all 0.3s ease;
      position: relative;
      display: flex;
      align-items: center;
      justify-content: center;
      padding: 0;
      overflow: hidden;
      background: #1A1F25;
      transform: scale(0);
    }
    @keyframes scaleIn {
      0% { transform: scale(0); }
      100% { transform: scale(1); }
    }
    .cell.correct {
      background-color: #4CAF50;
      box-shadow: 0 0 10px 5px rgba(76, 175, 80, 0.8);
      animation: glow 1.5s infinite ease-in-out;
    }
    @keyframes glow {
      0% { box-shadow: 0 0 10px 5px rgba(76, 175, 80, 0.5); }
      50% { box-shadow: 0 0 20px 10px rgba(76, 175, 80, 1); }
      100% { box-shadow: 0 0 10px 5px rgba(76, 175, 80, 0.5); }
    }
    /* –ê–Ω–∏–º–∞—Ü–∏—è thinking –¥–ª—è –∏–º–∏—Ç–∞—Ü–∏–∏ —Ä–∞–±–æ—Ç—ã AI */
    @keyframes thinking {
      0% { transform: scale(1); background-color: #1A1F25; }
      20% { transform: scale(1.05); background-color: #1D90F5; }
      40% { transform: scale(1); background-color: #1A1F25; }
      60% { transform: scale(1.05); background-color: #1D90F5; }
      80% { transform: scale(1); background-color: #1A1F25; }
      100% { transform: scale(1.05); background-color: #1D90F5; }
    }
    .cell.thinking {
      animation: thinking 2s ease-in-out;
    }
    .controls {
      background-color: rgba(26, 31, 37, 0.8);
      border-radius: 16px;
      padding: 24px;
      width: 100%;
      margin-top: 20px;
      opacity: 0;
      animation: fadeInUp 1s 1.2s forwards;
      backdrop-filter: blur(10px);
      box-shadow: 0 4px 30px rgba(0, 0, 0, 0.3);
    }
    .play-button {
      width: 100%;
      background-color: #1D90F5;
      color: white;
      border: none;
      padding: 0.75rem;
      border-radius: 0.5rem;
      font-size: 1rem;
      margin-bottom: 0.5rem;
      cursor: pointer;
      transition: all 0.3s;
      animation: pulse 2s infinite;
      position: relative;
      overflow: hidden;
    }
    .play-button:after {
      content: '';
      position: absolute;
      top: 0;
      left: -100%;
      width: 100%;
      height: 100%;
      background: linear-gradient(90deg, transparent 0%, rgba(255, 255, 255, 0.2) 50%, transparent 100%);
      transition: all 0.3s;
    }
    .play-button:hover:after {
      left: 100%;
    }
    .play-button:active {
      transform: scale(0.98);
    }

    .back-button {
            width: 100%;
            background: linear-gradient(93.73deg, #e75410, #c40e08);
            border: none;
            border-radius: 8px;
            color: white;
            font-size: 14px;
            font-weight: 500;
            height: 42px;
            cursor: pointer;
            margin-top: 10px;
            position: relative;
            overflow: hidden;
        }
        
    .back-button:after {
            content: '';
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 100%;
            background: linear-gradient(90deg, 
                transparent 0%, 
                rgba(255, 255, 255, 0.2) 50%, 
                transparent 100%);
            transition: all 0.3s;
        }

    .back-button:hover:after {
            left: 100%;
        }

    .back-button:disabled {
            opacity: 0.5;
            cursor: not-allowed;
        }

    @keyframes pulse {
      0% { box-shadow: 0 0 0 0 rgba(29, 144, 245, 0.7); }
      70% { box-shadow: 0 0 0 10px rgba(29, 144, 245, 0); }
      100% { box-shadow: 0 0 0 0 rgba(29, 144, 245, 0); }
    }
    @media (max-width: 480px) {
      .game-container {
        padding: 0.5rem;
      }
      .controls {
        padding: 1rem;
      }
    }

    /* –ù–æ–≤–∞—è –∞–Ω–∏–º–∞—Ü–∏—è –ø–æ—è–≤–ª–µ–Ω–∏—è —è—á–µ–µ–∫ —Å–≤–µ—Ä—Ö—É –≤–Ω–∏–∑ */
    @keyframes appearFromTop {
      0% { 
        transform: translateY(-50px) scale(0); 
        opacity: 0;
      }
      100% { 
        transform: translateY(0) scale(1); 
        opacity: 1;
      }
    }

    /* –ù–æ–≤–∞—è –∞–Ω–∏–º–∞—Ü–∏—è —Å–∫–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏—è */
    .scan-line {
      position: absolute;
      top: 0;
      left: 0;
      width: 100%;
      height: 2px;
      background: linear-gradient(90deg, 
        rgba(29, 144, 245, 0) 0%,
        rgba(29, 144, 245, 1) 50%,
        rgba(29, 144, 245, 0) 100%
      );
      box-shadow: 0 0 15px 3px rgba(29, 144, 245, 0.7);
      z-index: 10;
      opacity: 0;
      display: none;
    }

    .cell.scanning {
      background-color: rgba(29, 144, 245, 0.3);
      box-shadow: 0 0 8px 2px rgba(29, 144, 245, 0.5);
      transition: all 0.2s ease;
    }

    .cell.scanned {
      background-color: rgba(29, 144, 245, 0.1);
      box-shadow: none;
      transition: all 0.5s ease;
    }
  </style>
</head>
<body>
  <canvas id="stars-canvas"></canvas>

  <div class="header">
    <img src="images/logo.svg" alt="1Win" class="logo-img" id="logo">
    <!-- –ï—Å–ª–∏ –Ω—É–∂–Ω–æ, –º–æ–∂–Ω–æ –∑–¥–µ—Å—å —Ç–∞–∫–∂–µ –∑–∞–º–µ–Ω–∏—Ç—å –¥–µ–π—Å—Ç–≤–∏–µ –∫–Ω–æ–ø–∫–∏ -->
    <button class="switch-button" onclick="window.location.href='https://1wtxpx.top/casino/play/1play_1play_bombucks'">üé∞GAME HEREüé∞</button>
  </div>

  <div class="game-container">
    <div class="size-selector">
      <button class="size-button active" data-size="3x2">2x3</button>
      <button class="size-button" data-size="6x3">3x6</button>
      <button class="size-button" data-size="9x4">4x9</button>
      <button class="size-button" data-size="12x5">5x12</button>
      <button class="size-button" data-size="15x6">6x15</button>
    </div>

    <div class="game-grid" id="gameGrid">
      <!-- –Ø—á–µ–π–∫–∏ –≥–µ–Ω–µ—Ä–∏—Ä—É—é—Ç—Å—è JavaScript -->
      <div class="scan-line" id="scanLine"></div>
    </div>

    <div class="controls">
      <button class="play-button" onclick="startGame()">Play</button>
      <!-- –û–±–Ω–æ–≤–ª—ë–Ω–Ω–∞—è –∫–Ω–æ–ø–∫–∞ Back —Å–æ–≥–ª–∞—Å–Ω–æ –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª–µ–Ω–Ω–æ–º—É –≤–∞—Ä–∏–∞–Ω—Ç—É -->
      <div class="basis-1/3 pl-2 mobile:pl-0 mobile:basis-auto mobile:h-[3.25rem] mt-3">
        <button id="backButton" type="button" class="back-button" onclick="window.history.back()">
            Back
          </button>
          
      </div>
    </div>
  </div>

  <script>
    const IMAGES = {
      logo: 'images/logo.svg'
    };

    let gridSize = '3x2';   // 3 —Å—Ç—Ä–æ–∫–∏ x 2 —Å—Ç–æ–ª–±—Ü–∞
    let gridRows = 3;
    let gridCols = 2;
    let correctPath = [];
    let isGameStarted = false;
    let isThinking = false;
    let isScanning = false;

    // –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –ª–æ–≥–æ—Ç–∏–ø–∞
    document.getElementById('logo').src = IMAGES.logo;

    // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è —Ñ–æ–Ω–∞ —Å–æ –∑–≤—ë–∑–¥–∞–º–∏
    function initStarsBackground() {
      const canvas = document.getElementById('stars-canvas');
      const ctx = canvas.getContext('2d');
      
      canvas.width = window.innerWidth;
      canvas.height = window.innerHeight;
      
      const stars = [];
      const numStars = 100;
      const maxSize = 2;
      
      for (let i = 0; i < numStars; i++) {
        stars.push({
          x: Math.random() * canvas.width,
          y: Math.random() * canvas.height,
          size: Math.random() * maxSize,
          speed: 0.1 + Math.random() * 0.3,
          brightness: 0.2 + Math.random() * 0.8
        });
      }
      
      function animateStars() {
        ctx.clearRect(0, 0, canvas.width, canvas.height);
        for (let i = 0; i < stars.length; i++) {
          const star = stars[i];
          const brightness = star.brightness * (0.5 + Math.sin(Date.now() * 0.001 * star.speed) * 0.5);
          ctx.fillStyle = `rgba(255, 255, 255, ${brightness})`;
          ctx.beginPath();
          ctx.arc(star.x, star.y, star.size, 0, Math.PI * 2);
          ctx.fill();
          star.y += star.speed;
          if (star.y > canvas.height) {
            star.y = 0;
            star.x = Math.random() * canvas.width;
          }
        }
        requestAnimationFrame(animateStars);
      }
      animateStars();
      window.addEventListener('resize', function() {
        canvas.width = window.innerWidth;
        canvas.height = window.innerHeight;
      });
    }

    // –ì–µ–Ω–µ—Ä–∞—Ü–∏—è –∏–≥—Ä–æ–≤–æ–≥–æ –ø–æ–ª—è
    function generateGrid(rows, cols) {
      const grid = document.getElementById('gameGrid');
      grid.innerHTML = '';
      grid.style.gridTemplateColumns = `repeat(${cols}, 40px)`;
      grid.style.gridTemplateRows = `repeat(${rows}, 40px)`;
      
      // –î–æ–±–∞–≤–ª—è–µ–º –ª–∏–Ω–∏—é —Å–∫–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏—è
      const scanLine = document.createElement('div');
      scanLine.id = 'scanLine';
      scanLine.className = 'scan-line';
      grid.appendChild(scanLine);
      
      for (let i = 0; i < rows * cols; i++) {
        const cell = document.createElement('button');
        cell.className = 'cell';
        cell.dataset.index = i;
        grid.appendChild(cell);
      }
    }

    // –ê–Ω–∏–º–∞—Ü–∏—è –ø–æ—è–≤–ª–µ–Ω–∏—è —è—á–µ–µ–∫ —Å–≤–µ—Ä—Ö—É –≤–Ω–∏–∑
    function animateCellsAppearance() {
      const cells = document.querySelectorAll('.cell');
      cells.forEach((cell, index) => {
        const delay = Math.floor(index / gridCols) * 100; // –ó–∞–¥–µ—Ä–∂–∫–∞ –∑–∞–≤–∏—Å–∏—Ç –æ—Ç –Ω–æ–º–µ—Ä–∞ —Å—Ç—Ä–æ–∫–∏
        cell.style.animation = `appearFromTop 0.5s ease-out ${delay}ms forwards`;
      });
    }

    // –ì–µ–Ω–µ—Ä–∞—Ü–∏—è —Å–ª—É—á–∞–π–Ω–æ–≥–æ –ø—É—Ç–∏
    function generateRandomPath(rows, cols) {
      const path = [];
      for (let row = rows - 1; row >= 0; row--) {
        const col = Math.floor(Math.random() * cols);
        path.push({ row, col });
      }
      return path;
    }

    // –ù–æ–≤–∞—è –∞–Ω–∏–º–∞—Ü–∏—è —Å–∫–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏—è –ø–æ–ª—è
    function animateScanning() {
      if (isScanning) return;
      isScanning = true;
      
      const grid = document.getElementById('gameGrid');
      const gridHeight = grid.offsetHeight;
      const scanLine = document.getElementById('scanLine');
      
      // –ü–æ–∫–∞–∑—ã–≤–∞–µ–º –∏ –Ω–∞—Å—Ç—Ä–∞–∏–≤–∞–µ–º –ª–∏–Ω–∏—é —Å–∫–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏—è
      scanLine.style.display = 'block';
      scanLine.style.opacity = '1';
      scanLine.style.top = '0px';
      
      const cells = document.querySelectorAll('.cell');
      let currentRow = 0;
      
      function scanNextRow() {
        if (currentRow >= gridRows) {
          // –ó–∞–≤–µ—Ä—à–∞–µ–º —Å–∫–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ
          scanLine.style.opacity = '0';
          setTimeout(() => {
            scanLine.style.display = 'none';
            isScanning = false;
            
            // –ü–æ—Å–ª–µ —Å–∫–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏—è –∑–∞–ø—É—Å–∫–∞–µ–º "–¥—É–º–∞–Ω–∏–µ" AI
            setTimeout(() => {
              animateThinking();
            }, 500);
          }, 300);
          return;
        }
        
        // –£—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º –ø–æ–∑–∏—Ü–∏—é –ª–∏–Ω–∏–∏ —Å–∫–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏—è
        const rowHeight = gridHeight / gridRows;
        const topPosition = currentRow * rowHeight;
        scanLine.style.top = `${topPosition}px`;
        
        // –ü–æ–¥—Å–≤–µ—á–∏–≤–∞–µ–º —è—á–µ–π–∫–∏ —Ç–µ–∫—É—â–µ–≥–æ —Ä—è–¥–∞
        for (let col = 0; col < gridCols; col++) {
          const index = currentRow * gridCols + col;
          if (index < cells.length) {
            cells[index].classList.add('scanning');
            
            // –£–±–∏—Ä–∞–µ–º –ø–æ–¥—Å–≤–µ—Ç–∫—É —á–µ—Ä–µ–∑ –Ω–µ–±–æ–ª—å—à—É—é –∑–∞–¥–µ—Ä–∂–∫—É –∏ –¥–æ–±–∞–≤–ª—è–µ–º –∫–ª–∞—Å—Å "—Å–∫–∞–Ω–∏—Ä–æ–≤–∞–Ω–æ"
            setTimeout(() => {
              cells[index].classList.remove('scanning');
              cells[index].classList.add('scanned');
            }, 300);
          }
        }
        
        currentRow++;
        setTimeout(scanNextRow, 400); // –ó–∞–¥–µ—Ä–∂–∫–∞ –ø–µ—Ä–µ—Ö–æ–¥–∞ –∫ —Å–ª–µ–¥—É—é—â–µ–º—É —Ä—è–¥—É
      }
      
      // –ó–∞–ø—É—Å–∫–∞–µ–º —Å–∫–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ
      scanNextRow();
    }

    // –ê–Ω–∏–º–∞—Ü–∏—è "–¥—É–º–∞—é—â–µ–≥–æ" AI, –ø–æ—Å–ª–µ –∫–æ—Ç–æ—Ä–æ–π –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç—Å—è –ø—Ä–∞–≤–∏–ª—å–Ω—ã–π –ø—É—Ç—å
    function animateThinking() {
      if (isThinking) return;
      isThinking = true;
      const cells = document.querySelectorAll('.cell');
      const totalCells = cells.length;
      cells.forEach(cell => {
        cell.classList.remove('correct');
        cell.classList.remove('scanned'); // –£–±–∏—Ä–∞–µ–º –∫–ª–∞—Å—Å —Å–∫–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏—è
      });
      
      const numCellsToAnimate = Math.min(5, Math.floor(totalCells / 2));
      const randomIndices = [];
      while (randomIndices.length < numCellsToAnimate) {
        const index = Math.floor(Math.random() * totalCells);
        if (!randomIndices.includes(index)) {
          randomIndices.push(index);
        }
      }
      randomIndices.forEach(index => {
        cells[index].classList.add('thinking');
        setTimeout(() => {
          cells[index].classList.remove('thinking');
        }, 1800);
      });
      setTimeout(() => {
        isThinking = false;
        showCorrectPath();
      }, 2000);
    }

    // –ü–æ–∫–∞–∑ –ø—Ä–∞–≤–∏–ª—å–Ω–æ–≥–æ –ø—É—Ç–∏
    function showCorrectPath() {
      const cells = document.querySelectorAll('.cell');
      correctPath.forEach(({ row, col }, index) => {
        const cellIndex = row * gridCols + col;
        setTimeout(() => {
          cells[cellIndex].classList.add('correct');
        }, index * 200);
      });
    }

    // –û–±–Ω–æ–≤–ª–µ–Ω–Ω–∞—è —Ñ—É–Ω–∫—Ü–∏—è startGame —Å –Ω–æ–≤–æ–π –∞–Ω–∏–º–∞—Ü–∏–µ–π —Å–∫–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏—è
    function startGame() {
      if (isThinking || isScanning) return;
      isGameStarted = true;
      correctPath = generateRandomPath(gridRows, gridCols);
      generateGrid(gridRows, gridCols);
      
      // –°–Ω–∞—á–∞–ª–∞ –∞–Ω–∏–º–∏—Ä—É–µ–º –ø–æ—è–≤–ª–µ–Ω–∏–µ –∫–ª–µ—Ç–æ–∫
      animateCellsAppearance();
      
      // –ó–∞—Ç–µ–º –∑–∞–ø—É—Å–∫–∞–µ–º –∞–Ω–∏–º–∞—Ü–∏—é —Å–∫–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏—è
      setTimeout(() => {
        animateScanning();
      }, gridRows * 100 + 300);
    }

    function resetGame() {
      isGameStarted = false;
      correctPath = [];
      generateGrid(gridRows, gridCols);
      animateCellsAppearance(); // –ê–Ω–∏–º–∏—Ä—É–µ–º –ø–æ—è–≤–ª–µ–Ω–∏–µ –¥–∞–∂–µ –ø—Ä–∏ —Å–±—Ä–æ—Å–µ
    }

    const sizeButtons = document.querySelectorAll('.size-button');
    sizeButtons.forEach(button => {
      button.addEventListener('click', () => {
        if (isThinking || isScanning) return;
        sizeButtons.forEach(btn => btn.classList.remove('active'));
        button.classList.add('active');
        gridSize = button.dataset.size;
        const [rows, cols] = gridSize.split('x').map(Number);
        gridRows = rows;
        gridCols = cols;
        resetGame();
      });
    });

    document.addEventListener('DOMContentLoaded', function() {
      initStarsBackground();
      const defaultButton = document.querySelector('.size-button[data-size="3x2"]');
      defaultButton.classList.add('active');
      generateGrid(gridRows, gridCols);
      animateCellsAppearance(); // –ê–Ω–∏–º–∏—Ä—É–µ–º –ø–æ—è–≤–ª–µ–Ω–∏–µ –ø—Ä–∏ –ø–µ—Ä–≤–æ–π –∑–∞–≥—Ä—É–∑–∫–µ
    });
  </script>
</body>
</html>